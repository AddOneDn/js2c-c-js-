require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var s=e[n]=new t.Module(n);r[n][0].call(s.exports,i,s,s.exports)}return e[n].exports}function o(r){this.id=r,this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.isParcelRequire=!0,t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({4:[function(require,module,exports) {
Array.prototype.removeByVal=function(o){var e=this.indexOf(o);e>-1&&this.splice(e,1)},Array.prototype.removeByLastVal=function(o){var e=this.lastIndexOf(o);e>-1&&this.splice(e,1)},Array.prototype.removeByLastValObj=function(o){for(var e=-1,r=0;r<this.length;r++)this[r].value===o&&(e=r);e>-1&&this.splice(e,1)},Array.prototype.removeByIndex=function(o){this.splice(o,1)},String.prototype.replaceAll=function(o,e){var r=new RegExp(o,"g");return this.replace(r,e)},String.prototype.removeStrByIndex=function(o,e){return this.slice(0,o)+this.slice(e+1)};var o={logg:function(o){console.log("--------------------------------------------\n"),console.log(o),console.log(),console.log("--------------------------------------------\n")},errLogg:function(o,e){console.log("-------------error------------\n"),console.error(o+": "+e),console.log(),console.log("-------------error------------\n")}};module.exports=o;
},{}],5:[function(require,module,exports) {
var n=/^(if|else|else if|for|while)[\s]*$/,e=/^(print|printf)[\s]*$/,i=["c","i","s","l","d","f","b"],t={isState:function(n,e,t){var f=t.slice(e,e+7);return-1!=f.indexOf("char")||-1!=f.indexOf("int")||-1!=f.indexOf("short")||-1!=f.indexOf("long")||-1!=f.indexOf("double")||-1!=f.indexOf("float")||-1!=f.indexOf("string")||-1!=f.indexOf("bool")?!!i.includes(n)&&-1!==f.indexOf(" "):(-1!=(f=t.slice(e,e+10)).indexOf("long long")||-1!=f.indexOf("long double"))&&("l"==n&&-1!==f.indexOf(" "))},isNotFunc:function(e){return!!n.test(e)},isBaseFunc:function(n){return!!e.test(n)&&n},isExistFunc:function(n){return!!n.includes("=")}};module.exports=t;
},{}],6:[function(require,module,exports) {
var o={printf:"console.log"};module.exports=o;
},{}],7:[function(require,module,exports) {
var e={printf:function(e){var l=e.lastIndexOf('"'),i="",n=e.slice(l+2,e.length).replaceAll(" ","").split(","),r=e.indexOf("%"),t=0;if(-1===r)i=e;else for(;-1!=r;)i+="'"+e.slice(1,r)+"' + "+n[t],t++,-1!=(r=(e=e.slice(r+1,e.length)).indexOf("%"))&&(i+=" + ");return i}};module.exports=e;
},{}],3:[function(require,module,exports) {
var e=require("./util"),t=require("./common"),a=require("./func-name-map"),r=require("./func-handle-map"),n='\n#include "stdlib.h"\n\nint add(a,b){\n  int sum = a + b;\n  return sum;\n};\nint main() {\n  string str = "hello world";\n  int a = 3, b = 1;\n  int res = add(a, b);\n  if( res > a ) {\n    printf("the result is %d", res);\n  } else {\n    printf("%s", str);\n  };\n  return 0;\n}',i=/\s/,u=/[a-z0-9 | :~,'"%=+/\-*/^></\[/\]!.&]/i,s="\n",l=!1;function p(e){for(var a=0,r=[];a<e.length;){var n=e[a];if(t.isState(n,a,e))a=a+e.slice(a,a+10).indexOf(" ")+1,r.push({type:"state",value:"var"});else if("("!==n)if(")"!==n)if("{"!==n)if("}"!==n)if(";"!==n)if(n===s&&r.push({type:"newline",value:"\n"}),i.test(n))r.push({type:"whitespace",value:" "}),a++;else if(u.test(n)){for(var p="";u.test(n)&&n||"("===n&&l||")"===n&&"'"===e[a+1];)p+=n,n=e[++a];r.push({type:"string",value:p})}else if("#"!==n)a++;else for(;"\n"!=n;)n=e[++a];else r.push({type:"semicolon",value:";"}),a++;else r.push({type:"parenb",value:"}"}),a++;else r.push({type:"parenb",value:"{"}),a++;else l=!1,r.push({type:"paren",value:")"}),a++;else l=!0,r.push({type:"paren",value:"("}),a++}return r}var o=!1;function c(a){var r=0,n=void 0;function i(){var n=a[r];if("string"===n.type){var s=a[++r];if(s&&"paren"===s.type&&"("===s.value)return null;if(s&&"parenb"===s.type&&"{"===s.value){var l=a[r-1].value,p=l.removeStrByIndex(l.indexOf("["),l.indexOf("]"));a[r-1].value=p,console.log(p)}return{type:"StringLiteral",value:n.value}}if("semicolon"===n.type)return r++,{type:"SemLiteral",value:n.value};if("whitespace"===n.type)return r++,{type:"WhiteLiteral",value:n.value};if("newline"===n.type)return r++,{type:"LineLiteral",value:n.value};if("state"===n.type)return r++,{type:"StateLiteral",value:n.value};if("parenb"===n.type&&("{"===n.value||"}"===n.value)){var c=n.value;return("string"===a[r-1].type&&-1!=a[r-1].value.search("=")||o)&&(o=!0,"{"===n.value?c="[":"}"===n.value&&(c="]",o=!1)),r++,{type:"ParenbLiteral",value:c}}if("paren"===n.type&&"("===n.value){var v={type:"CallExpression",params:[],name:"",isFunc:!0,isBaseFunc:!0,isExistFunc:!1},f=a[r-1];if("string"===f.type)if(v.name=f.value,t.isNotFunc(v.name))v.isFunc=!1;else t.isBaseFunc(v.name)||(u.body.removeByLastValObj("var"),v.isBaseFunc=!1),t.isExistFunc(v.name)&&(v.isExistFunc=!0);n=a[++r];for(var y=void 0;"paren"!==n.type||"paren"===n.type&&")"!==n.value;)if("StateLiteral"!==(y=i()).type&&(v.params.push(y),!(n=a[r]))){e.errLogg("parser过程出错","存在括号未闭合错误<"+r+">");break}return r++,v}e.errLogg("parser过程出错","发现未知类型"+n.type),r++}for(var u={type:"Program",body:[]};r<a.length;)(n=i())&&u.body.push(n);return u}function v(t,a){function r(e,t){e.forEach(function(e){n(e,t)})}function n(t,n){if(t){var i=a[t.type];switch(i&&i(t,n),t.type){case"Program":r(t.body,t);break;case"CallExpression":r(t.params,t);break;case"StringLiteral":case"StateLiteral":case"SemLiteral":case"WhiteLiteral":case"LineLiteral":case"ParenbLiteral":break;default:e.errLogg("astTraver过程出错","发现未知类型"+t.type)}}else e.errLogg("astTraver过程出错","括号未闭合或出现未知类型<"+n.type+">")}n(t,null)}function f(e){var t={type:"Program",body:[]};return e._context=t.body,v(e,{StringLiteral:function(e,t){t._context.push({type:"StringLiteral",value:e.value})},StateLiteral:function(e,t){t._context.push({type:"StateLiteral",value:e.value})},SemLiteral:function(e,t){t._context.push({type:"SemLiteral",value:e.value})},WhiteLiteral:function(e,t){t._context.push({type:"WhiteLiteral",value:e.value})},LineLiteral:function(e,t){t._context.push({type:"LineLiteral",value:e.value})},ParenbLiteral:function(e,t){t._context.push({type:"ParenbLiteral",value:e.value})},CallExpression:function(e,t){var a={type:"CallExpression",callee:{type:"Identifier",name:e.name},isFunc:e.isFunc,isBaseFunc:e.isBaseFunc,isExistFunc:e.isExistFunc,arguments:[]};e._context=a.arguments,"CallExpression"!=t.type&&(a={type:"ExpressionStatement",expression:a}),t._context.push(a)}}),t}var y=!0;function L(t){switch(t.type){case"Program":return t.body.map(L).join("");case"ExpressionStatement":return L(t.expression);case"CallExpression":y=!1;var n=L(t.callee),i=t.arguments.map(L),u=void 0;if(t.isFunc)if(t.isBaseFunc){var s=r[n](i.join(""));u=a[n]+"("+s+")"}else u=t.isExistFunc?"var "+n+"("+i.join(", ")+")":"function "+n+"("+i.join(", ")+")";else u=n+"("+i.join("")+")";return y=!0,u;case"Identifier":return t.name;case"NumberLiteral":case"StringLiteral":return t.value;case"StateLiteral":return t.value+" ";case"SemLiteral":return";";case"WhiteLiteral":return" ";case"LineLiteral":return"\n";case"ParenbLiteral":return t.value;default:e.errLogg("generator过程出错","发现未知类型"+t.type)}}function m(t){var a=p(t);e.logg(a);var r=c(a);e.logg(r);var n=f(r);return e.logg(n),L(n)}module.exports=m;
},{"./util":4,"./common":5,"./func-name-map":6,"./func-handle-map":7}],1:[function(require,module,exports) {
var compiler=require("./index"),input='#include "stdio.h";\nint add(int a,b){\n  int sum = a + b;\n  return sum;\n};\nint main() {\n  string str = "hello world";\n  int a = 3, b = 1;\n  int res = add(a, b);\n  if( res > a ) {\n    printf("the result is %d", res);\n  } else {\n    printf("%s", str);\n  };\n  return 0;\n}',test="int a[5] = {1,2,3,4,5};";document.getElementById("input").value=input,document.getElementById("transformBtn").addEventListener("click",function(){var e=document.getElementById("input").value,n=compiler(e);document.getElementById("output").value=n}),document.getElementById("executeBtn").addEventListener("click",function(){var value=document.getElementById("output").value;value+="\nmain();";try{var log=eval(value);document.getElementById("log").value=log}catch(e){alert(e)}});
},{"./index":3}]},{},[1])